webpackJsonp([0xf93c955f2f71],{604:function(n,a){n.exports={data:{site:{siteMetadata:{description:"I am Kostas Bariotis, a web developer, a proud wanderer and a passionate doer. My mission is to write clean and efficient code, to solve problems on the web and to learn something more.",siteUrl:"https://kostasbariotis.com"}}},pathContext:{posts:[{excerpt:"Linting and auto-formatting are a well known process among JavaScript developers, although due to the lack of a standard tool, lots of folks are not aware of it. While a linter analyzes your code and warns you for potential issues, a formatter can…",html:'<p>Linting and auto-formatting are a well known process among JavaScript developers, although due to the lack of a standard tool, lots of folks are not aware of it. While a linter analyzes your code and warns you for potential issues, a formatter can auto format it based on your preferences.</p>\n<p>\n          <a\n            class="gatsby-resp-image-link"\n            href="undefined"\n            style="display: block"\n            target="_blank"\n            rel="noopener"\n          >\n            <span\n              class="gatsby-resp-image-wrapper"\n              style="position: relative; z-index: -1; display: block; "\n            >\n              <span\n                class="gatsby-resp-image-background-image"\n                style="padding-bottom: 38.9937106918239%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQY012R627DIAyF8zhbS24QsCEhAdqkl0XVLtr7v8oOdH82C1nHINufTXUqFmNclkUr1dR103Zt1zWwLPpe6a6XuC7nj1UpRWYOIYzOXb33xth48ee7nZMN65iu7JMyfHh9qUX9P5mtRQ9DpKQ8O+eJbNjC7d2vuwsbzyeaIqPQsgJBCFE3pX/xlS2G5kTUtW1+EKIwt039ZO+AXcjxchTHQ/HHnLxtWwhxXdcUY3KOlSKPPmeaguaJlxO0ttNAoxnnfjCYwjgPjaLVNHnsxTpntN7nOVo3rnt8+wL5GC/z5ZH273j/DLcPVJGajPVYYicVsCrkGKXgQaelzHyaBnZYEiQ8jtQsBxrIFU1gzsMDeyF64J+Ynxfid7AcFS2yfobZ/077tB/ilGSN1nfSQQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n              >\n                <img\n                  class="gatsby-resp-image-image"\n                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n                  alt="ESLint Output example"\n                  title=""\n                  src="/static/eslint-example-858d80105fac915ba80799e9d22f1018-cd462.png"\n                  srcset="/static/eslint-example-858d80105fac915ba80799e9d22f1018-92f91.png 188w,\n/static/eslint-example-858d80105fac915ba80799e9d22f1018-dc30f.png 375w,\n/static/eslint-example-858d80105fac915ba80799e9d22f1018-cd462.png 750w,\n/static/eslint-example-858d80105fac915ba80799e9d22f1018-1de4a.png 1125w,\n/static/eslint-example-858d80105fac915ba80799e9d22f1018-a9764.png 1272w"\n                  sizes="(max-width: 750px) 100vw, 750px"\n                />\n              </span>\n            </span>\n          </a>\n          </p>\n<p>Plenty of times, I had to deal with a JavaScript codebase that was missing proper styleguide and rules. The coding style was varying across the project, unused or implicit globals variables and unused required dependencies were lying everywhere.</p>\n<p>On this post, I will share my plan on how to add a proper toolchain and a process to a codebase that has none but doing it in a controlled and progressive way. I will use <a href="https://eslint.org" target="_blank" rel="noreferrer noopener">ESLint</a> as the linter and <a href="https://prettier.io" target="_blank" rel="noreferrer noopener">Prettier</a> as the formatter (but as a plugin to ESLint) with the recommended set of rules. ESLint has come a long way and there is massive adoption by the community with lots of plugins. Prettier ... well, it\'s prettier than the <a href="https://eslint.org/docs/user-guide/command-line-interface#--fix" target="_blank" rel="noreferrer noopener">fix mode of ESLint</a>.</p>\n<h2 id="the-problem"><a href="#the-problem" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The problem</h2>\n<p>The first thing that came to my mind when I first faced a situation was to stop everything and work exclusively on adding a linter and fixing and refactoring the whole codebase. I immediately dropped that option.</p>\n<p>While refactoring is fun (at least for me), no one really likes doing it for a long period of time, let alone the fact that we can\'t stop releasing features to customers regardless. The bigger the codebase, the longer will take to restructure it as a whole.</p>\n<p>But even if we had the luxury to do it, major changes in a codebase may lead to unexpected behavior that may lead to major bugs that will certainly lead to hours and hours wasted in debugging.</p>\n<blockquote>\n<p>...Since each refactoring is small, it\'s less likely to go wrong. The system is also kept fully working after each small refactoring, reducing the chances that a system can get seriously broken during the restructuring.</p>\n</blockquote>\n<p>With that statement <a href="https://refactoring.com/" target="_blank" rel="noreferrer noopener">by Martin Fowler</a> in my mind, I proposed to start fixing the code progressively, refactoring only the affected code on every feature branch each of our team members was working on.</p>\n<p>This way we would have total control over the changes that would break our code and we would fix them before they were released.</p>\n<h2 id="the-plan"><a href="#the-plan" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The plan</h2>\n<p>Simple. We will first have to discuss and agree (if in a team) on the styleguide we want to follow and then put a configuration file for our tools to follow.</p>\n<p>Then we want to run the process once and let the formatter fix the easy stylish parts (missing spaces, semicolons, etc..) hoping that no human intervention would be required for those changes.</p>\n<p>The last part will be to setup a pre-commit git hook that will trigger the linting and refuse to commit if it didn\'t pass. This way we would be sure that no "bad" code enters the codebase.</p>\n<p>Let\'s start by installing dependencies:</p>\n<p><code>npm i --save-dev eslint prettier eslint-config-prettier eslint-plugin-prettier</code></p>\n<p>Then add your <code>.eslintrc</code> file with contents. This is just an example setup I hacked for simplicity purposes. It follows the recommended rules by ESLint and also extends Prettier to work with ESLint seamlessly. Last I have added some custom rules of mine.</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span>\n    <span class="token string">"plugin:prettier/recommended"</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">6</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"prettier/prettier"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">"warn"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        <span class="token property">"singleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        <span class="token property">"trailingComma"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>\n        <span class="token property">"printWidth"</span><span class="token operator">:</span> <span class="token number">100</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>The configuration applies the recommended by ESLint set of rules and also the Prettier plugin which will both override ESLint\'s formatting rules and also run Prettier whenever ESLint is run. Then we override Prettier\'s default rules to match our preferences.</p>\n<p>Now that our configuration is in place, let\'s run it and see how it goes. Add this your <code>package.json</code> (we will use it later) and run <code>npm run lint</code>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n  ...\n\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"./node_modules/.bin/eslint --ext .js --ext .jsx src"</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n\n  ...\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>If everything went well, you will see a bunch of errors on your console but you will also notice that Prettier formatted your code!</p>\n<p>Now you have some work to do. First of all, run your tests and/or do some manual testing to ensure that everything works as before. Then, inspect the errors in your console and make sure you\'re happy with them. Remember that they won\'t stay there forever. The styleguide can change and adapt, so don\'t waste time figuring out particular edge cases.</p>\n<p>Once you are done, commit all of your changes cause that will be the last time you committed code with errors in your codebase.</p>\n<p>Now we want to setup the linter to run on pre-commit only on the modified files. Let\'s install some dependencies again that will help us do that.</p>\n<p><code>npm i --save-dev husky lint-staged</code></p>\n<p>Then modify your <code>package.json</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n  ...\n\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"precommit"</span><span class="token operator">:</span> <span class="token string">"lint-staged"</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  ...\n\n  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"*.{js,jsx}"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">"./node_modules/.bin/eslint --fix"</span><span class="token punctuation">,</span>\n      <span class="token string">"git add"</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n\n  ...\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p><a href="https://github.com/typicode/husky" target="_blank" rel="noreferrer noopener">Husky</a> will add the <code>precommit</code> script as a precommit hook to Git. Every time you are going to commit a bunch of files will run the <a href="https://github.com/okonet/lint-staged" target="_blank" rel="noreferrer noopener">lint-staged</a> which in turn will list all the currently staged files and run ESLint with every each of them. If one fails, the hook will fail.</p>\n<p>Now try to modify a file and commit it. Husky will run the precommit hook only for the file that you tried to modify. You won\'t be able to commit unless the linter says so.</p>\n<h2 id="the-results"><a href="#the-results" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The results</h2>\n<p>The plan worked great and after a few weeks, the whole codebase changed radically. We weren\'t bothering with formatting our code while writing it and we could be sure on every commit that we didn\'t forget to initialize a variable before using it.</p>\n<p>What would you do in a similar position?</p>',id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/progressive-linting/index.md absPath of file >>> MarkdownRemark",timeToRead:5,frontmatter:{date:"2018-02-11",path:"/progressive-javascript-linting/",tags:"JavaScript, Linting",title:"Progressive JavaScript Linting",draft:null}},{excerpt:"With the eighth (8) version of Node.js becoming an LTS, I think that this is a good time to consider switching to it and enjoy the awesome new  async/await  feature that will help us move away to an even more readable and synchronous flow. Promises…",html:'<p>With the eighth (8) version of Node.js becoming an LTS, I think that this is a good time to consider switching to it and enjoy the awesome new <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noreferrer noopener">async/await</a> feature that will help us move away to an even more readable and synchronous flow. Promises served us well for the past 2 or so years but they came with frustration as well.</p>\n<p>In this post, I will try to provide a real world example of how we can move a Promise-based REST API controller to an async/await style. This way we can have a better understanding of how things have changed and what are the benefits of such a move.</p>\n<h2 id="a-promise-based-example"><a href="#a-promise-based-example" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Promise-based example</h2>\n<p>Let\'s take an example and move from there. This is an actual controller (slighty changed for the purposes of this post) from a project of mine I\'ve been working on:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> BPromise <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'bluebird\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">{</span> WrongCredentialsError<span class="token punctuation">,</span> DBConnectionError<span class="token punctuation">,</span> EmailError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./../errors\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * Emulate an Express.js route call as an example\n */</span>\n<span class="token function">loginController</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> json<span class="token punctuation">:</span> response <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>\n\n<span class="token keyword">function</span> <span class="token function">loginController</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> user<span class="token punctuation">;</span>\n\n  BPromise<span class="token punctuation">.</span><span class="token keyword">try</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">validateUserInput</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fetchedUser <span class="token operator">=></span> user <span class="token operator">=</span> fetchedUser<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">comparePasswords</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>password<span class="token punctuation">,</span> user<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>token <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> token <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>WrongCredentialsError<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Invalid email and/or password\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>EmailError<span class="token punctuation">,</span> DBConnectionError<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Unexpected error, please try again\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Validate input from Request\n *\n * @param {Object} input\n * @throws {WrongCredentialsError}\n * @returns {Void}\n */</span>\n<span class="token keyword">function</span> <span class="token function">validateUserInput</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>input<span class="token punctuation">.</span>email <span class="token operator">||</span> <span class="token operator">!</span>input<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Fetch a User from the DB by Email\n *\n * @throws WrongCredentialsError\n * @throws DBConnectionError\n * @returns {BPromise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>\n    userId<span class="token punctuation">:</span> <span class="token string">\'DUMMY_ID\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'konmpar@gmail.com\'</span><span class="token punctuation">,</span>\n    password<span class="token punctuation">:</span> <span class="token string">\'DUMMY_PASSWORD_HASH\'</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Compare two password\n *\n * @param {String} inputPwd\n * @param {String} storedPwd\n * @throws {WrongCredentialsError}\n * @returns {Void}\n */</span>\n<span class="token keyword">function</span> <span class="token function">comparePasswords</span><span class="token punctuation">(</span>inputPwd<span class="token punctuation">,</span> storedPwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hashPassword</span><span class="token punctuation">(</span>inputPwd<span class="token punctuation">)</span> <span class="token operator">!==</span> storedPwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Hash password\n *\n * @param {String} password\n * @returns {String}\n */</span>\n<span class="token keyword">function</span> <span class="token function">hashPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> password<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Mark a user\'s logged in timestamp\n *\n * @param {String} userId\n * @throws DBConnectionError\n * @returns {BPromise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Send a follow up email\n *\n * @param {String} userId\n * @throws EmailError\n * @returns {BPromise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Generate a JWT token to send to the client\n *\n * @param {Object} user\n * @returns {BPromise&lt;String>}\n */</span>\n<span class="token keyword">function</span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token string">\'DUMMY_JWT_TOKEN\'</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>So a few notes here:</p>\n<h3 id="outer-scope-variables"><a href="#outer-scope-variables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Outer scope variables</h3>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">let</span> user<span class="token punctuation">;</span>\n\n<span class="token comment">/* ... */</span>\n  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fetchedUser <span class="token operator">=></span> user <span class="token operator">=</span> fetchedUser<span class="token punctuation">)</span>\n  <span class="token comment">/* ... */</span>\n  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token comment">/* ... */</span>\n</code></pre>\n      </div>\n<p>Notice here how I am making a global inside the function, in order to use the User object on various calls in my Promise chain. A possible overcome would be to make my functions always return the User object, but that would a) make my functions make no sense at all and b) tightly couple my functions with this particular Promise chain so I couldn\'t use them in other places.</p>\n<h3 id="start-the-promise-chain-with-a-promise"><a href="#start-the-promise-chain-with-a-promise" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start the Promise chain with a Promise</h3>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment">/* ... */</span>\nBPromise<span class="token punctuation">.</span><span class="token keyword">try</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">validateUserInput</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token comment">/* ... */</span>\n</code></pre>\n      </div>\n<p>A Promise chain must start from a Promise, but the <code>validateUserInput</code> function doesn\'t return one. <code>Bluebird</code> to the resque. This way I can wrap my functions inside of a Promise call. I agree when you tell me this is just noise.</p>\n<h3 id="bluebird"><a href="#bluebird" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bluebird</h3>\n<p>I am using Bluebird a lot. And that\'s because without it my code would be even more bloated with Promise returns here and there. Bluebird makes a good use of DRY so I don\'t have to. I could make all my functions, even those that doesn\'t do async stuff, return a Promise but that would mean that I had to "wait" for them, which means even more noise.</p>\n<p>But, Bluebird is just another dependency that can possibly break my code on its next release. We don\'t want that.</p>\n<h2 id="asyncawait-version"><a href="#asyncawait-version" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async/Await version</h2>\n<p>Let\'s now see the same code, but written with async/await and compare it with the above.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> WrongCredentialsError<span class="token punctuation">,</span> DBConnectionError<span class="token punctuation">,</span> EmailError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./../errors\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * Emulate an Express.js route call as an example\n */</span>\n<span class="token function">loginController</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> json<span class="token punctuation">:</span> response <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>\n\n<span class="token comment">/**\n *\n * @param {Object} req\n * @param {Object} res\n * @param {Object} err\n * @returns {Void}\n */</span>\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loginController</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>email<span class="token punctuation">;</span>\n\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>password <span class="token operator">!==</span> <span class="token function">hashPassword</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">await</span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">await</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> token <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Invalid email and/or password\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">DBConnectionError</span> <span class="token operator">||</span> err <span class="token keyword">instanceof</span> <span class="token class-name">EmailError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Unexpected error, please try again\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Fetch a User from the DB by Email\n *\n * @throws WrongCredentialsError\n * @throws DBConnectionError\n * @returns {Promise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>\n    userId<span class="token punctuation">:</span> <span class="token string">\'DUMMY_ID\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'konmpar@gmail.com\'</span><span class="token punctuation">,</span>\n    password<span class="token punctuation">:</span> <span class="token string">\'DUMMY_PASSWORD_HASH\'</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Hash password\n *\n * @param {String} password\n * @returns {String}\n */</span>\n<span class="token keyword">function</span> <span class="token function">hashPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> password<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Mark a user\'s logged in timestamp\n *\n * @param {String} userId\n * @throws DBConnectionError\n * @returns {Promise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Send a follow up email\n *\n * @param {String} userId\n * @throws EmailError\n * @returns {Promise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Generate a JWT token to send to the client\n *\n * @param {Object} user\n * @returns {Promise&lt;String>}\n */</span>\n<span class="token keyword">function</span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token string">\'DUMMY_JWT_TOKEN\'</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Yay!</p>\n<h3 id="no-outer-scope-variables"><a href="#no-outer-scope-variables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No outer scope variables</h3>\n<p>Now all our functions are called in the same block thus the same scope, without being passed in a <code>then</code> function. We don\'t have to do unneeded assignments and keep global variables.</p>\n<h3 id="no-unessecary-promise-returns"><a href="#no-unessecary-promise-returns" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No unessecary Promise returns</h3>\n<p>Previously declared functions <code>validateInput</code> and <code>comparePasswords</code> can now live inside the main block. I wouldn\'t write unit tests on them neither I would use them somewhere else in my codebase, so I don\'t have to put them in separate functions. Less functions, less code.</p>\n<h3 id="readable-code"><a href="#readable-code" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Readable code</h3>\n<p>Less code means easier to read and argue about.</p>\n<h3 id="no-bluebird-dependency"><a href="#no-bluebird-dependency" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No Bluebird dependency</h3>\n<p>Bluebird is now not needed since we can return native Promise objects. Previously, I was using <code>catch</code> with specific error type and <code>try</code> which are Bluebird specific.</p>\n<h2 id="conclussion"><a href="#conclussion" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclussion</h2>\n<p>We should always strive to refine and improve our codebases. Async/await can bring a lot of improvements and help us write more readable code, easier to argue about and to spot bugs. In case, you have to use still Promises, check out a <a href="http://2ality.com/2017/08/promise-callback-data-flow.html" target="_blank" rel="noreferrer noopener">wonderfull piece by Dr. Axel Rauschmayer</a> for more Promises and Async/Await patterns.</p>\n<p>Node.js 8 is now in LTS mode, so you have no reasons not to upgrade and miss the shiny new features of Javascript.</p>\n<p>Let me know what you think in the comments below and share this article with someone you know it would be helpfull to. 🤝</p>',
id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/async-await-a-thorough-example/index.md absPath of file >>> MarkdownRemark",timeToRead:6,frontmatter:{date:"2017-11-24T09:40:42.000Z",path:"/async-await-a-thorough-example/",tags:"Node.js, AsyncAwait",title:"Async/await - A thorough example",draft:null}},{excerpt:"This post will be an attempt for me to start talking about the, all heard about it, serverless thing. I have been working with a serverless architecture on top of AWS for the last few months and I am feeling like I have a complete picture about it…",html:'<p>This post will be an attempt for me to start talking about the, all heard about it, serverless thing. I have been working with a serverless architecture on top of AWS for the last few months and I am feeling like I have a complete picture about it and a lot to share.</p>\n<p>I have gathered quite a few subjects I would like to write about but this post will be just an introduction and my point of view on serverless.</p>\n<h2 id="serverless-as-in-without-servers"><a href="#serverless-as-in-without-servers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>"Serverless"? as in "without servers"?</h2>\n<p>Let us please start with the elephant in the room.</p>\n<blockquote>\n<p><em>Serverless doesn\'t mean no servers.</em></p>\n</blockquote>\n<iframe src="https://giphy.com/embed/j2nATOAdRgYZq" width="374" height="380" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>\n<p>It simply means that the underlying servers are being hidden from the developer. Like when you are talking with the GitHub API, the underlying infrastructure is completely hidden from you and you don\'t have to worry about it.</p>\n<p>It is a rather confusing term, but don\'t let it fool you. You will still have to manage some kind of an infrastructure.</p>\n<h2 id="what-is-serverless"><a href="#what-is-serverless" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is serverless</h2>\n<p>From setting up a load balancer, ensuring that your platform can perform good at scale and setting up the build server for your CI/CD process, the infrastructure part of software development is one big chapter.</p>\n<p>Serverless is the state where all of the above are abstracted away and hidden behind APIs that you can manage them through.</p>\n<p>The diagram below illustrates how serverless is the evolution of Platform as a Service providers such as Heroku.</p>\n<p>\n          <a\n            class="gatsby-resp-image-link"\n            href="undefined"\n            style="display: block"\n            target="_blank"\n            rel="noopener"\n          >\n            <span\n              class="gatsby-resp-image-wrapper"\n              style="position: relative; z-index: -1; display: block; "\n            >\n              <span\n                class="gatsby-resp-image-background-image"\n                style="padding-bottom: 94.82470784641067%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAABt0lEQVQ4y4WU547CQAyE8/6Pxw9a6EQQEEX0khCfxtIXmcDdrbTyFns89nqdVFVljLh+Pp92v9/tdDrZ8Xisp84ej4e9Xq/aBjvJJG40yrK02+3mgBrL5dJGo1E9i6JwMOkIuEkmiRuBSBHg8/ls2+3Wme12O1+LsfRkE/U/GMqzwtGAoRj0ej1nOZ1ObTwe2+FwcIbX69VltHNAFniSlBJONC+Xi08ByAkkBKq1zkiRA+pAIeqQi2YexZRQBSR99CBUhyzKJFpDezFDUXkTw+hEoORdushEniJDAZMTjGazmU0mkzdD7CIh7ROAuCRvmpRFv9+3VqvlLGOYOCaHDkiRAghLGAhEZaPXlRRr6USGkrD/k6HuBKBwsyyz/X7/P0M8ARJzKCljFTRFjW5TD5y3V46FLQUYMyjkyJJQ61eOdYh3vCp/7XbbZ7fbtcFg4Eyj3kcdxp+CpJNovdlsPFSteZh4z4Pi4OMvA0oBSw6HQ2e3Xq/r0EnLr38ZUJjyanQdvTY/iJzTM792m2Y/BKjT6dhqtfLfkqaps2xG8dYPmx2XQZdZLBYOmOe5zedzfxTK5lvH/gE6/cyqVTMEdwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n              >\n                <img\n                  class="gatsby-resp-image-image"\n                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n                  alt="Serverless diagram"\n                  title=""\n                  src="/static/serverless-8d37a2362437d7e5405b7888683c7f97-cd462.png"\n                  srcset="/static/serverless-8d37a2362437d7e5405b7888683c7f97-92f91.png 188w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-dc30f.png 375w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-cd462.png 750w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-1de4a.png 1125w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-d2712.png 1198w"\n                  sizes="(max-width: 750px) 100vw, 750px"\n                />\n              </span>\n            </span>\n          </a>\n          </p>\n<p>The Function as a Service that we are hearing a lot, and usually comes in conjuction with the serverless term, is just a language runtime hidden behind an API. With AWS Lambda, e.g. what I can do is to make a POST request on their API with some Node.js source code and it will return me a UID that I can use on another POST request to run it. That\'s it. No cluster setup, no ports binding. It\'s just takes my code and runs it.</p>\n<p>Serverless hides its roots in the microservices architectures were bigger and complex systems are being broken out in multiple isolated services. The goal is to abstract away complex parts of our codebase from the other developers and let them interact with those through an API.</p>\n<p>And like a monolith that you decided to break it down in smaller services, is something that you can progresivelly fade in. You don\'t have to go one hundred percent serverless.</p>\n<h2 id="functionsdatabaserouteretc-as-a-service"><a href="#functionsdatabaserouteretc-as-a-service" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Functions/Database/Router/etc... as a Service</h2>\n<p>Think of a simple CRUD REST API. We need a database, a runtime to run our code and an HTTP proxy/router. Each of these has its own caveats and things that we have to take actions for. Database needs indexing and backups operations, our runtime needs a scaling protocol and the proxy needs an authentication mechanism.</p>\n<blockquote>\n<p><em>Anything that can be abstracted away, will be abstracted away.</em></p>\n</blockquote>\n<p>By putting all of the above, behind an API(one API for each service, remember the bounded context?) and let them take handle of their own issues, the only thing we left with is "our code".</p>\n<p>It\'s a form of outsourcing really, with a more simplified communication process.</p>\n<p><a href="https://plus.google.com/+RipRowan/posts/eVeouesvaVX" target="_blank" rel="noreferrer noopener">Jeff Bezos once</a> instructed every team inside Amazon to have a developer that will create an API for that team and let all teams communicate only through these APIs. Thus AWS was born. Serverless is that particular mindset in scale.</p>\n<h2 id="not-simpler"><a href="#not-simpler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Not simpler</h2>\n<blockquote>\n<p><em>Now you are able to focus on writing your code...</em></p>\n</blockquote>\n<p>I know. Such a cliche.</p>\n<p>In reality, it\'s not that simple. And while I am feeling like we are getting there, it\'s still not possible.</p>\n<p>While serverless and the current state can boost development, it\'s still not that simple. You still need to have a knowledge of how servers works, basic understanding of distributed systems and security.</p>\n<p>On top of that, each external API has each own caveats and terminology you will need to get familiar with.</p>\n<p>There are also cons that you will have take in consideration, such as the vendor lock in. Out sourcing your work means that you are bringing in partners. You need to think about each and every one of them.</p>\n<p>The development tools around a serverless architecture is also still a blurry place to be. A local development will be hard, often times impossible to setup. Consider that early in your architecture design in order to avoid surprises later on.</p>\n<h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>\n<p>Serverless is an amazing technology, or a mindset if you will. Major providers such as AWS and Google Cloud brought it to the next level and if you haven\'t played with them even for a while, I am suggesting you to do so. Just to take a look.</p>\n<p>I\'am not sure if it will transform the way we structure and develop our architectures, but it\'s certainly a very interesting field to explore.</p>\n<p>I will continue writing about various serverless topics that I have found interesting and challenging on my journey.</p>\n<p>Leave me a comment about the part about serverless that confuses the most.</p>',id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/serverless-demystified/index.md absPath of file >>> MarkdownRemark",timeToRead:4,frontmatter:{date:"2017-11-11T18:51:34.000Z",path:"/serverless-demystified/",tags:"Serverless, AWS",title:"Serverless Demystified",draft:null}},{excerpt:"In this post, I will talk about static site generators. How they have evolved and why I switched from a  Ghost  powered site to  Gatsby.js , a modern static site generator. Static site generators as we know them Jekyll ,  Hexo ,  Hugo . They do one…",html:'<p>In this post, I will talk about static site generators. How they have evolved and why I switched from a <a href="https://ghost.org" target="_blank" rel="noreferrer noopener">Ghost</a> powered site to <a href="https://gatsbyjs.org" target="_blank" rel="noreferrer noopener">Gatsby.js</a>, a modern static site generator.</p>\n<h2 id="static-site-generators-as-we-know-them"><a href="#static-site-generators-as-we-know-them" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Static site generators as we know them</h2>\n<p><a href="http://jekyllrb.com" target="_blank" rel="noreferrer noopener">Jekyll</a>, <a href="https://hexo.io" target="_blank" rel="noreferrer noopener">Hexo</a>, <a href="https://gohugo.io/" target="_blank" rel="noreferrer noopener">Hugo</a>. They do one thing and they do it well. I\'ve built a ton of sites using Jekyll hosted either on GitHub either somewhere else. They all work pretty much the same way:</p>\n<ul>\n<li>You describe your content in some common templating language (<a href="pugjs.org">Pug</a>, <a href="http://handlebarsjs.com" target="_blank" rel="noreferrer noopener">Handlebars</a>, etc)</li>\n<li>While in development, start a local web server and add file "watchers" that will listen for content changes and re-render the site</li>\n<li>Finally, you render the whole site in static HTML and deploy. The generator will combine your files and produce a well formed HTML content.</li>\n</ul>\n<p>A caveat here is that you have to keep the client side logic separated from the backend. Much like in an architecture where Wordpress is involved. So, pretty much nothing is changing. The difference from having a cached version of Wordpress and content generated with Jekyll is none.</p>\n<h2 id="enter-the-new-world-order"><a href="#enter-the-new-world-order" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enter the new world order</h2>\n<p><a href="https://facebook.github.io/react/" target="_blank" rel="noreferrer noopener">React.js</a>! Awww yeah! We\'ve heard about it! It\'s dominating the Web, but for a reason. There are so many reasons React.js have gained such a hype. Many of the techniques we will discuss here can be easily applied to other frameworks and libraries but React.js can play so nicely with them.</p>\n<p>There is this function called <a href="https://facebook.github.io/react/docs/react-dom-server.html" target="_blank" rel="noreferrer noopener">Server Side Rendering</a> where you can produce static HTML content directly from a tree of React.js components. That HTML content will contain the required React.js specific annotations so when the same tree will be loaded on the client, on top of the previously produced content, will know exactly what has to be rendered and what not to. From there, the client side logic can take the lead. Once the user visits a site, the server will respond with the static HTML. Once it\'s loaded in the user\'s browser and the user navigates in another route, the client side logic will respond and will render the new page, instead of contacting the server again. The same codebase will be used for the backend as also for the frontend. And that\'s a game changer.</p>\n<p>So let\'s see the new list:</p>\n<ul>\n<li>Describe your content in React.js Components</li>\n<li>On development time, write code like a boss (hot reloading, modularized code, webpack plugins, etc...)</li>\n<li>Use React.js SSR API to produce the static content to be served on the backend, as well as the frontend side assets to be used on the visitor\'s browser</li>\n</ul>\n<h2 id="wait-what-like-that"><a href="#wait-what-like-that" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wait, what? Like that?</h2>\n<p>Yeah, I know. I made it look so easy. It\'s not. There is the need for a strong abstraction that will track your links across your components, parse content written in another format, like blog posts written in Markdown, generate code that will not bloat the client and will efficiently serve the content to the user.</p>\n<p>Thankfully, there are a few projects that took the initiative and they are doing a great job so far. At the time of reading this, this site will already be served by GitHub pages and the content you will see once you view the source it\'s been generated by <a href="https://gatsbyjs.org" target="_blank" rel="noreferrer noopener">Gatsby.js</a>.</p>\n<p>I have been following those projects for quite a while. Here\'s my list:</p>\n<ul>\n<li><a href="https://gatsbyjs.org" target="_blank" rel="noreferrer noopener">Gatsby.js</a></li>\n<li><a href="https://phenomic.io" target="_blank" rel="noreferrer noopener">Phenomic</a></li>\n<li><a href="https://nextein.now.sh" target="_blank" rel="noreferrer noopener">nextein</a></li>\n</ul>\n<p>At the time that I started following them, all of them were in a very early stage and none of them could generate my site\'s content the way I wanted and in the same way as my previous one so to not lose paths and certain functionalities. I wanted to make the generated site, exactly like the old one in terms of the user experience. Once Gatsby.js hit major version 1, I started using it and the result..., you are looking at it!</p>\n<h2 id="what-exactly-am-i-looking-at"><a href="#what-exactly-am-i-looking-at" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What exactly am I looking at?</h2>\n<p>First, if you navigate around my site, you will notice that the browser doesn\'t fully re-renders the site. Gatsby will generate a JSON file for each route, so the browser can request only that file and React.js will render only the appropriate components. (Previously, I was using a technique called <a href="https://github.com/kbariotis/kostasbariotis.com__ghost-theme/blob/master/src/js/app.js#L11" target="_blank" rel="noreferrer noopener">pjax</a> to create the same effect. While it looked the same, it was more hack-ish.)</p>\n<p>Second, you can take a look at the <a href="https://github.com/kbariotis/kostasbariotis.com" target="_blank" rel="noreferrer noopener">source code</a>. While you need some knowledge of how Gatsby works, let me give you a sense of how this site is being generated. You can find all my blog posts and the main pages(<code>/</code>, <code>/about</code>, <code>/drafts</code>) of this site at <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/src/pages" target="_blank" rel="noreferrer noopener"><code>/src/pages</code></a>. Common components can be found at <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/src/components" target="_blank" rel="noreferrer noopener"><code>/src/components</code></a>. At <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/gatsby-node.js" target="_blank" rel="noreferrer noopener"><code>/gatsby-node.js</code></a> you can find the route it takes in order to render the site. First, it loads all posts using the GraphQL api which queries all <code>.md</code> files. Then it creates a page for each one, using the <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/src/templates/blog-post.js" target="_blank" rel="noreferrer noopener"><code>/src/templates/blog-post.js</code></a> template and before that it creates a page, with pagination, for all posts and tags again using the appropriate template file.</p>\n<p>On development, Gatsby will generate all of these in memory and fire up a development server that I can use to preview my site.</p>\n<p>You can try it your self by cloning the <a href="https://github.com/kbariotis/kostasbariotis.com" target="_blank" rel="noreferrer noopener">source code</a> and after installing dependencies, hit:</p>\n<ul>\n<li><code>npm run develop</code> to fire up the development server</li>\n<li><code>npm run build</code> to build the site (check the <code>/public</code> folder after its done)</li>\n</ul>\n<h2 id="an-alternative-to-html-caching"><a href="#an-alternative-to-html-caching" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>An alternative to HTML caching</h2>\n<p>Static site generation can be seen as another form of caching your content. Think of when you are caching the home page of a Wordpress powered site and you are serving the cached content to every visitor. The thing though is that in many cases, there is no need for a system like Wordpress at all.</p>\n<p>My personal site contains a list of blog posts and static information about me that I am updating it once in a while. Comments are being hosted on <a href="https://disqus.com" target="_blank" rel="noreferrer noopener">Disqus</a>. There is absolutely no need for a system like Wordpress or even a system like <a href="https://ghost.org" target="_blank" rel="noreferrer noopener">Ghost</a> which I have been using for the last 3 years. While it served me well all this time, I really got tired of updating it, ssh-ing to the server, doing migrations and doing other ops required by such a stack. While there are also options for hosting in the cloud, pretty much they will be paid and fairly enough, they deserve it for doing such a job.</p>\n<p>But do I need a system like that? Not at all. And while we all know how much important that Wordpress\' Admin UI is to maintain our content, I would argue that we can separate the backend from the frontend and have lots of new features built in automatically. Imagine that instead of having <a href="https://memcached.org/" target="_blank" rel="noreferrer noopener">memcached</a> caching your HTML in front of your WordPress site, you trigger a hook each time your database changes that will re-generate the frontend using <a href="https://www.gatsbyjs.org/packages/gatsby-source-wordpress/" target="_blank" rel="noreferrer noopener">Gatsby</a>. Yes, Gatsby supports multiple backend sources to load your content. Instead of storing them inside your VCS like me, you can as well load them from your Wordpress\'s MySQL database.</p>\n<p>To conclude, modern static generators will allow us to:</p>\n<ul>\n<li>serve static content without maintaining complex stacks</li>\n<li>keep a clear separation between the backend and the frontend</li>\n<li>have cool features like client side routing and hot reload on development, out of the box</li>\n<li>reuse the same code that is being used to generate the backend content at our visitors\' browsers</li>\n</ul>\n<p>Hope that you will experiment with Gatsby and you will let me know what you think.</p>',id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/modern-static-site-generation/index.md absPath of file >>> MarkdownRemark",timeToRead:6,frontmatter:{date:"2017-08-18T00:00:00.000Z",path:"/modern-static-site-generation/",tags:"node.js, reactjs, javascript",title:"Modern static site generation",draft:null}},{excerpt:"I started looking for a remote position, telecommuting in other words, as a software engineer last November. It took me 3 months to apply to ~150 job descriptions and none of them was a successful hire. Nevertheless, I now have a great job and I…",html:'<p>I started looking for a remote position, telecommuting in other words, as a software engineer last November. It took me 3 months to apply to ~150 job descriptions and none of them was a successful hire. Nevertheless, I now have a great job and I would like to share that experience with you. I have prepared a spreadsheet listing anonymous applications, whether they rejected me or I rejected them and till which level I got into. I will also share my cover letter and how I approached the remote job hunting.</p>\n<h2 id="why-a-remote-position"><a href="#why-a-remote-position" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why a remote position?</h2>\n<p>After quite a few years doing this job, I have become quite selective when it comes to my next job. I need myself to be a good fit on the team and the team to be a good fit for me. I don\'t like big established corporations cause there is almost never anything interesting for me there. I like small ambitious teams, flexible enough to do one week sprints and put all of their heart in every sprint. I want the team\'s long-term goals to be my long term goals so I can put myself in it.</p>\n<p>I would call them "startups" just because it\'s cool nowadays, but I won\'t because that\'s simply not what I am all about. Startups are all about high risk, I am not (at least not at this point).</p>\n<p>While Greece had quite a few success stories of such teams, my hometown Thessaloniki, in northern Greece is not that famous for their startup environment. Leaving Greece wasn\'t possible at the moment so I thought I would chase a remote position especially after having lots of local friends who work for big companies like, GitHub, Automattic, etc.</p>\n<p>Let one not forget, there is also the compensation parameter that says that you can enter a better-paid market than your local market, which is no debatable for my local market.</p>\n<p>So I thought I would give it a try.</p>\n<h2 id="the-setup"><a href="#the-setup" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The setup</h2>\n<p>The setup when you do job hunting has everything to do with how you present yourself in the online world. How I present myself you ask? Well, you are looking at it. This web page contains everything you need to know about me, all the projects I am working on, everything I have share with my readers, lots of my views about stuff (ok not everything, but you get the idea). You can find all my social profiles (GitHub, LinkedIn, Twitter, etc) through this web page and lots of other places are linking back to my blog posts.</p>\n<p>But to make the recruiter to visit my page, I had to go through her mailbox first. So I tried to write a catchy email worthy enough to make her click my web page. Keep in mind that I am not targeting a big corporation but rather a team where the casual speech is usual. I wanted to write an email that will automatically filter out the "serious" guys and attract the more friendly ones. That\'s why the friendly tone.</p>\n<p>This is the final version of it because I had to do some revises after I sent it a few times.</p>\n<blockquote>\n<p>Dear Mr/Ms,</p>\n<p>I am Kostas Bariotis, a software developer and a passionate doer. I am sending you my regards from sunny Thessaloniki, Greece. Have you ever been? Take a look, I am sure you will fall in love with the amazing beaches of Chalkidiki.</p>\n<p>I am currently looking for a product and a team that I would be a great fit in. I stumbled upon your job description and I would really love it to talk more with you guys. I have been working with Node.js for the past three years. (<strong>This is where I explain why I would be a good fit for that particular position</strong>)</p>\n<p>I am obsessed with clean and efficient code. I am interested in designing software architectures, APIs and databases to serve the rest of an application. I am a full stack developer yet I love taking a specific field in my hands and getting the juice out of it. I am interested in being a part of a team that builds great software. I have spent the last two years with the <a href="https://goodvid.io" target="_blank" rel="noreferrer noopener">Goodvid.io</a> team to serve e-commerce sites with curated product videos.</p>\n<p>My blog is my personal playground, I am also doing a lot of public speaking talking a lot about tech stuff and also talking with others on my podcast. Stargento and <a href="https://gityeller.com" target="_blank" rel="noreferrer noopener">GitYeller</a> are two of my side projects. You can find more code samples and my contributions on <a href="https://github.com/kbariotis" target="_blank" rel="noreferrer noopener">Github</a>. Along with some folks, we are organizing the local <a href="https://www.meetup.com/Thessaloniki-Node-js-Meetup/" target="_blank" rel="noreferrer noopener">Nodejs meetup</a> and <a href="http://devitconf.org" target="_blank" rel="noreferrer noopener">Devit Conf</a>, the biggest web development conference in northern Greece. We are also known as <a href="https://skgtech.io" target="_blank" rel="noreferrer noopener">SKGTech</a>.</p>\n<p>Last, but not least, I love reading books, mainly science fiction, traveling and attending conferences and meetups, snowboarding and staying fit. Calisthenics class is my latest activity that takes a lot of my time.</p>\n<p>I would love it if we could arrange a talk and talk more about how I could potentially be a fit for your team. Please, consult my resume or see the links below.</p>\n<p>Thank you so much and have a nice day. :)</p>\n</blockquote>\n<h2 id="where-did-i-look"><a href="#where-did-i-look" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Where did I look?</h2>\n<p>Nowadays there are lots of places to find a remote position, especially in software engineering. Here\'s my list of preference:</p>\n<ul>\n<li><a href="https://weworkremotely.com/" target="_blank" rel="noreferrer noopener">weworkremotely.com</a></li>\n<li><a href="https://stackoverflow.com/jobs?sort=i&#x26;r=true" target="_blank" rel="noreferrer noopener">Stackoverflow Jobs</a> (with <code>Offers remote</code> filter on)</li>\n<li><a href="http://angel.co" target="_blank" rel="noreferrer noopener">Angel.co</a> (mostly known for early stages companies)</li>\n<li><a href="https://github.com/jessicard/remote-jobs" target="_blank" rel="noreferrer noopener">https://github.com/jessicard/remote-jobs</a></li>\n<li><a href="https://github.com/lukasz-madon/awesome-remote-job" target="_blank" rel="noreferrer noopener">https://github.com/lukasz-madon/awesome-remote-job</a></li>\n</ul>\n<h2 id="the-results"><a href="#the-results" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The results</h2>\n<p>Like I said I didn\'t have a successful hire after all. Lots of companies showed interest in me and lots of others didn\'t even bother contacting me back.</p>\n<p><a href="https://docs.google.com/spreadsheets/d/17w6jiewdPQSgSL3Rripit2RdjWcR_I_m7ObBObmQAh0/edit?usp=sharing" target="_blank" rel="noreferrer noopener">I have gathered over 70 applications</a> the months that I was looking for a job. Keep in mind that these are only those that I had some sort of communication through email or some other mean. I also did lots of applications on Angel.co and other similar sites that I\'ve never heard back. The sum of the applications must exceed those 70 by far.</p>\n<h2 id="what-i-have-learned"><a href="#what-i-have-learned" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What I have learned</h2>\n<p>The progress I had with each company varies. It\'s interesting to see how many contacted me back and how many wanted to do an <a href="https://kostasbariotis.com/interviewer-vs-interviewee/" target="_blank" rel="noreferrer noopener">interview</a> and how many interviews did I took on average with each company. I believe, though, that the most interesting part is that with over 70 applications I did, I took back like 3 offers which lead me to the conclusion that the market of the remote positions is highly competitive and it\'s really hard to find the job that you would be happy enough.</p>\n<p>As you enter a bigger market of potential employers, the same way they enter a bigger market of potential employees. Most of the times, the best yet the cheapest at their fields are those who get hired.</p>\n<p>But that\'s ok, cause this makes the market grow. There are still these companies that are looking for other parameters and don\'t care about the cost that much, but these companies have higher expectations and juniors/mid developers are often not being considered that easily.</p>\n<p>I am back on track now on a great team and an amazing environment in the heart of Thessaloniki. I am not rejecting the idea of working remotely entirely but I will leave it aside for now.</p>\n<p>Hope that you liked this post.</p>',
id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/how-i-failed-landing-a-remote-position/index.md absPath of file >>> MarkdownRemark",timeToRead:6,frontmatter:{date:"2017-07-07T17:43:00.000Z",path:"/how-i-failed-landing-a-remote-position/",tags:"interviews, job, engineers",title:"How I failed landing a remote position",draft:null}}],page:1,pagesSum:14,prevPath:null,nextPath:"/page/2"}}}});
//# sourceMappingURL=path---page-1-8d216faca4ff2882a9fc.js.map