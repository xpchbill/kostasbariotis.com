webpackJsonp([86216955392603],{628:function(n,s){n.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAQBAgUD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwIB/9oADAMBAAIQAxAAAAGXEfnO2KxXytBY6QBP/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIDEQASIiH/2gAIAQEAAQUC2qMsrDRjkh7U+9ZIKYC8jNp//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPwFlQ//EABkRAAEFAAAAAAAAAAAAAAAAAAABECExQf/aAAgBAgEBPwGWwWz/xAAbEAACAgMBAAAAAAAAAAAAAAAAEQEhAxAxgf/aAAgBAQAGPwK2dsYo5BBWReaRB//EABwQAAICAwEBAAAAAAAAAAAAAAERACExQVFhcf/aAAgBAQABPyHzg5KmRyuAZAwYJ2aHFOw5Qmlybntx2y3CnEl/Z//aAAwDAQACAAMAAAAQOyi8/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERMUH/2gAIAQMBAT8QUXCB6YR//8QAGhEAAgIDAAAAAAAAAAAAAAAAAAERMSFBsf/aAAgBAgEBPxByVkzvonYxY//EAB0QAQEAAwACAwAAAAAAAAAAAAERACFBMVFhcbH/2gAIAQEAAT8Q6uhuUW+P3HKhIpbqr8JMNj2KrvBpVoF3uLYUDX3imLRSGt4ck1onhy7wNT0XD24jIs1n/9k=",aspectRatio:.9657118055555556,src:"/static/avatar-820706df6fdb07a9b021a790449fec17-381d6.jpg",srcSet:"/static/avatar-820706df6fdb07a9b021a790449fec17-62f05.jpg 200w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-dc2b4.jpg 400w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-381d6.jpg 800w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-e5d70.jpg 1200w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-d14e0.jpg 1600w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-9cc71.jpg 2225w",srcWebp:"/static/avatar-820706df6fdb07a9b021a790449fec17-fefde.webp",srcSetWebp:"/static/avatar-820706df6fdb07a9b021a790449fec17-5eed2.webp 200w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-68e3c.webp 400w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-fefde.webp 800w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-300fe.webp 1200w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-ed5bd.webp 1600w,\n/static/avatar-820706df6fdb07a9b021a790449fec17-9442a.webp 2225w",sizes:"(max-width: 800px) 100vw, 800px"}}},site:{siteMetadata:{title:"Kostas Bariotis' Blog",description:"I am Kostas Bariotis, a web developer, a proud wanderer and a passionate doer. My mission is to write clean and efficient code, to solve problems on the web and to learn something more.",siteUrl:"https://kostasbariotis.com"}},markdownRemark:{html:'<p>This post will be an attempt for me to start talking about the, all heard about it, serverless thing. I have been working with a serverless architecture on top of AWS for the last few months and I am feeling like I have a complete picture about it and a lot to share.</p>\n<p>I have gathered quite a few subjects I would like to write about but this post will be just an introduction and my point of view on serverless.</p>\n<h2 id="serverless-as-in-without-servers"><a href="#serverless-as-in-without-servers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>"Serverless"? as in "without servers"?</h2>\n<p>Let us please start with the elephant in the room.</p>\n<blockquote>\n<p><em>Serverless doesn\'t mean no servers.</em></p>\n</blockquote>\n<iframe src="https://giphy.com/embed/j2nATOAdRgYZq" width="374" height="380" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>\n<p>It simply means that the underlying servers are being hidden from the developer. Like when you are talking with the GitHub API, the underlying infrastructure is completely hidden from you and you don\'t have to worry about it.</p>\n<p>It is a rather confusing term, but don\'t let it fool you. You will still have to manage some kind of an infrastructure.</p>\n<h2 id="what-is-serverless"><a href="#what-is-serverless" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is serverless</h2>\n<p>From setting up a load balancer, ensuring that your platform can perform good at scale and setting up the build server for your CI/CD process, the infrastructure part of software development is one big chapter.</p>\n<p>Serverless is the state where all of the above are abstracted away and hidden behind APIs that you can manage them through.</p>\n<p>The diagram below illustrates how serverless is the evolution of Platform as a Service providers such as Heroku.</p>\n<p>\n          <a\n            class="gatsby-resp-image-link"\n            href="undefined"\n            style="display: block"\n            target="_blank"\n            rel="noopener"\n          >\n            <span\n              class="gatsby-resp-image-wrapper"\n              style="position: relative; z-index: -1; display: block; "\n            >\n              <span\n                class="gatsby-resp-image-background-image"\n                style="padding-bottom: 94.82470784641067%;position: relative; width: 100%; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAABt0lEQVQ4y4WU547CQAyE8/6Pxw9a6EQQEEX0khCfxtIXmcDdrbTyFns89nqdVFVljLh+Pp92v9/tdDrZ8Xisp84ej4e9Xq/aBjvJJG40yrK02+3mgBrL5dJGo1E9i6JwMOkIuEkmiRuBSBHg8/ls2+3Wme12O1+LsfRkE/U/GMqzwtGAoRj0ej1nOZ1ObTwe2+FwcIbX69VltHNAFniSlBJONC+Xi08ByAkkBKq1zkiRA+pAIeqQi2YexZRQBSR99CBUhyzKJFpDezFDUXkTw+hEoORdushEniJDAZMTjGazmU0mkzdD7CIh7ROAuCRvmpRFv9+3VqvlLGOYOCaHDkiRAghLGAhEZaPXlRRr6USGkrD/k6HuBKBwsyyz/X7/P0M8ARJzKCljFTRFjW5TD5y3V46FLQUYMyjkyJJQ61eOdYh3vCp/7XbbZ7fbtcFg4Eyj3kcdxp+CpJNovdlsPFSteZh4z4Pi4OMvA0oBSw6HQ2e3Xq/r0EnLr38ZUJjyanQdvTY/iJzTM792m2Y/BKjT6dhqtfLfkqaps2xG8dYPmx2XQZdZLBYOmOe5zedzfxTK5lvH/gE6/cyqVTMEdwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n              >\n                <img\n                  class="gatsby-resp-image-image"\n                  style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n                  alt="Serverless diagram"\n                  title=""\n                  src="/static/serverless-8d37a2362437d7e5405b7888683c7f97-cd462.png"\n                  srcset="/static/serverless-8d37a2362437d7e5405b7888683c7f97-92f91.png 188w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-dc30f.png 375w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-cd462.png 750w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-1de4a.png 1125w,\n/static/serverless-8d37a2362437d7e5405b7888683c7f97-d2712.png 1198w"\n                  sizes="(max-width: 750px) 100vw, 750px"\n                />\n              </span>\n            </span>\n          </a>\n          </p>\n<p>The Function as a Service that we are hearing a lot, and usually comes in conjuction with the serverless term, is just a language runtime hidden behind an API. With AWS Lambda, e.g. what I can do is to make a POST request on their API with some Node.js source code and it will return me a UID that I can use on another POST request to run it. That\'s it. No cluster setup, no ports binding. It\'s just takes my code and runs it.</p>\n<p>Serverless hides its roots in the microservices architectures were bigger and complex systems are being broken out in multiple isolated services. The goal is to abstract away complex parts of our codebase from the other developers and let them interact with those through an API.</p>\n<p>And like a monolith that you decided to break it down in smaller services, is something that you can progresivelly fade in. You don\'t have to go one hundred percent serverless.</p>\n<h2 id="functionsdatabaserouteretc-as-a-service"><a href="#functionsdatabaserouteretc-as-a-service" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Functions/Database/Router/etc... as a Service</h2>\n<p>Think of a simple CRUD REST API. We need a database, a runtime to run our code and an HTTP proxy/router. Each of these has its own caveats and things that we have to take actions for. Database needs indexing and backups operations, our runtime needs a scaling protocol and the proxy needs an authentication mechanism.</p>\n<blockquote>\n<p><em>Anything that can be abstracted away, will be abstracted away.</em></p>\n</blockquote>\n<p>By putting all of the above, behind an API(one API for each service, remember the bounded context?) and let them take handle of their own issues, the only thing we left with is "our code".</p>\n<p>It\'s a form of outsourcing really, with a more simplified communication process.</p>\n<p><a href="https://plus.google.com/+RipRowan/posts/eVeouesvaVX" target="_blank" rel="noreferrer noopener">Jeff Bezos once</a> instructed every team inside Amazon to have a developer that will create an API for that team and let all teams communicate only through these APIs. Thus AWS was born. Serverless is that particular mindset in scale.</p>\n<h2 id="not-simpler"><a href="#not-simpler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Not simpler</h2>\n<blockquote>\n<p><em>Now you are able to focus on writing your code...</em></p>\n</blockquote>\n<p>I know. Such a cliche.</p>\n<p>In reality, it\'s not that simple. And while I am feeling like we are getting there, it\'s still not possible.</p>\n<p>While serverless and the current state can boost development, it\'s still not that simple. You still need to have a knowledge of how servers works, basic understanding of distributed systems and security.</p>\n<p>On top of that, each external API has each own caveats and terminology you will need to get familiar with.</p>\n<p>There are also cons that you will have take in consideration, such as the vendor lock in. Out sourcing your work means that you are bringing in partners. You need to think about each and every one of them.</p>\n<p>The development tools around a serverless architecture is also still a blurry place to be. A local development will be hard, often times impossible to setup. Consider that early in your architecture design in order to avoid surprises later on.</p>\n<h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>\n<p>Serverless is an amazing technology, or a mindset if you will. Major providers such as AWS and Google Cloud brought it to the next level and if you haven\'t played with them even for a while, I am suggesting you to do so. Just to take a look.</p>\n<p>I\'am not sure if it will transform the way we structure and develop our architectures, but it\'s certainly a very interesting field to explore.</p>\n<p>I will continue writing about various serverless topics that I have found interesting and challenging on my journey.</p>\n<p>Leave me a comment about the part about serverless that confuses the most.</p>',excerpt:"This post will be an attempt for me to start talking about the, all heard about it, serverless thing. I have been working with a serverless…",frontmatter:{date:"November 11, 2017",path:"/serverless-demystified/",tags:"Serverless, AWS",title:"Serverless Demystified",draft:null}}},pathContext:{prev:{excerpt:"With the eighth (8) version of Node.js becoming an LTS, I think that this is a good time to consider switching to it and enjoy the awesome new  async/await  feature that will help us move away to an even more readable and synchronous flow. Promises…",html:'<p>With the eighth (8) version of Node.js becoming an LTS, I think that this is a good time to consider switching to it and enjoy the awesome new <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noreferrer noopener">async/await</a> feature that will help us move away to an even more readable and synchronous flow. Promises served us well for the past 2 or so years but they came with frustration as well.</p>\n<p>In this post, I will try to provide a real world example of how we can move a Promise-based REST API controller to an async/await style. This way we can have a better understanding of how things have changed and what are the benefits of such a move.</p>\n<h2 id="a-promise-based-example"><a href="#a-promise-based-example" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Promise-based example</h2>\n<p>Let\'s take an example and move from there. This is an actual controller (slighty changed for the purposes of this post) from a project of mine I\'ve been working on:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> BPromise <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'bluebird\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">{</span> WrongCredentialsError<span class="token punctuation">,</span> DBConnectionError<span class="token punctuation">,</span> EmailError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./../errors\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * Emulate an Express.js route call as an example\n */</span>\n<span class="token function">loginController</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> json<span class="token punctuation">:</span> response <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>\n\n<span class="token keyword">function</span> <span class="token function">loginController</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> user<span class="token punctuation">;</span>\n\n  BPromise<span class="token punctuation">.</span><span class="token keyword">try</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">validateUserInput</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fetchedUser <span class="token operator">=></span> user <span class="token operator">=</span> fetchedUser<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">comparePasswords</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>password<span class="token punctuation">,</span> user<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>token <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> token <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>WrongCredentialsError<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Invalid email and/or password\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>EmailError<span class="token punctuation">,</span> DBConnectionError<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Unexpected error, please try again\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Validate input from Request\n *\n * @param {Object} input\n * @throws {WrongCredentialsError}\n * @returns {Void}\n */</span>\n<span class="token keyword">function</span> <span class="token function">validateUserInput</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>input<span class="token punctuation">.</span>email <span class="token operator">||</span> <span class="token operator">!</span>input<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Fetch a User from the DB by Email\n *\n * @throws WrongCredentialsError\n * @throws DBConnectionError\n * @returns {BPromise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>\n    userId<span class="token punctuation">:</span> <span class="token string">\'DUMMY_ID\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'konmpar@gmail.com\'</span><span class="token punctuation">,</span>\n    password<span class="token punctuation">:</span> <span class="token string">\'DUMMY_PASSWORD_HASH\'</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Compare two password\n *\n * @param {String} inputPwd\n * @param {String} storedPwd\n * @throws {WrongCredentialsError}\n * @returns {Void}\n */</span>\n<span class="token keyword">function</span> <span class="token function">comparePasswords</span><span class="token punctuation">(</span>inputPwd<span class="token punctuation">,</span> storedPwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hashPassword</span><span class="token punctuation">(</span>inputPwd<span class="token punctuation">)</span> <span class="token operator">!==</span> storedPwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Hash password\n *\n * @param {String} password\n * @returns {String}\n */</span>\n<span class="token keyword">function</span> <span class="token function">hashPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> password<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Mark a user\'s logged in timestamp\n *\n * @param {String} userId\n * @throws DBConnectionError\n * @returns {BPromise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Send a follow up email\n *\n * @param {String} userId\n * @throws EmailError\n * @returns {BPromise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Generate a JWT token to send to the client\n *\n * @param {Object} user\n * @returns {BPromise&lt;String>}\n */</span>\n<span class="token keyword">function</span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token string">\'DUMMY_JWT_TOKEN\'</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>So a few notes here:</p>\n<h3 id="outer-scope-variables"><a href="#outer-scope-variables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Outer scope variables</h3>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">let</span> user<span class="token punctuation">;</span>\n\n<span class="token comment">/* ... */</span>\n  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fetchedUser <span class="token operator">=></span> user <span class="token operator">=</span> fetchedUser<span class="token punctuation">)</span>\n  <span class="token comment">/* ... */</span>\n  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token comment">/* ... */</span>\n</code></pre>\n      </div>\n<p>Notice here how I am making a global inside the function, in order to use the User object on various calls in my Promise chain. A possible overcome would be to make my functions always return the User object, but that would a) make my functions make no sense at all and b) tightly couple my functions with this particular Promise chain so I couldn\'t use them in other places.</p>\n<h3 id="start-the-promise-chain-with-a-promise"><a href="#start-the-promise-chain-with-a-promise" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start the Promise chain with a Promise</h3>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment">/* ... */</span>\nBPromise<span class="token punctuation">.</span><span class="token keyword">try</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">validateUserInput</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token comment">/* ... */</span>\n</code></pre>\n      </div>\n<p>A Promise chain must start from a Promise, but the <code>validateUserInput</code> function doesn\'t return one. <code>Bluebird</code> to the resque. This way I can wrap my functions inside of a Promise call. I agree when you tell me this is just noise.</p>\n<h3 id="bluebird"><a href="#bluebird" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bluebird</h3>\n<p>I am using Bluebird a lot. And that\'s because without it my code would be even more bloated with Promise returns here and there. Bluebird makes a good use of DRY so I don\'t have to. I could make all my functions, even those that doesn\'t do async stuff, return a Promise but that would mean that I had to "wait" for them, which means even more noise.</p>\n<p>But, Bluebird is just another dependency that can possibly break my code on its next release. We don\'t want that.</p>\n<h2 id="asyncawait-version"><a href="#asyncawait-version" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async/Await version</h2>\n<p>Let\'s now see the same code, but written with async/await and compare it with the above.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> WrongCredentialsError<span class="token punctuation">,</span> DBConnectionError<span class="token punctuation">,</span> EmailError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./../errors\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * Emulate an Express.js route call as an example\n */</span>\n<span class="token function">loginController</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> json<span class="token punctuation">:</span> response <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>\n\n<span class="token comment">/**\n *\n * @param {Object} req\n * @param {Object} res\n * @param {Object} err\n * @returns {Void}\n */</span>\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loginController</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>email<span class="token punctuation">;</span>\n\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>password <span class="token operator">!==</span> <span class="token function">hashPassword</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">await</span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">await</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> token <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">WrongCredentialsError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Invalid email and/or password\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">DBConnectionError</span> <span class="token operator">||</span> err <span class="token keyword">instanceof</span> <span class="token class-name">EmailError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token string">\'Unexpected error, please try again\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> success<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Fetch a User from the DB by Email\n *\n * @throws WrongCredentialsError\n * @throws DBConnectionError\n * @returns {Promise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">fetchUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>\n    userId<span class="token punctuation">:</span> <span class="token string">\'DUMMY_ID\'</span><span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> <span class="token string">\'konmpar@gmail.com\'</span><span class="token punctuation">,</span>\n    password<span class="token punctuation">:</span> <span class="token string">\'DUMMY_PASSWORD_HASH\'</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Hash password\n *\n * @param {String} password\n * @returns {String}\n */</span>\n<span class="token keyword">function</span> <span class="token function">hashPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> password<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Mark a user\'s logged in timestamp\n *\n * @param {String} userId\n * @throws DBConnectionError\n * @returns {Promise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">markLoggedInTimestamp</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Send a follow up email\n *\n * @param {String} userId\n * @throws EmailError\n * @returns {Promise}\n */</span>\n<span class="token keyword">function</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Generate a JWT token to send to the client\n *\n * @param {Object} user\n * @returns {Promise&lt;String>}\n */</span>\n<span class="token keyword">function</span> <span class="token function">generateJWT</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token string">\'DUMMY_JWT_TOKEN\'</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Yay!</p>\n<h3 id="no-outer-scope-variables"><a href="#no-outer-scope-variables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No outer scope variables</h3>\n<p>Now all our functions are called in the same block thus the same scope, without being passed in a <code>then</code> function. We don\'t have to do unneeded assignments and keep global variables.</p>\n<h3 id="no-unessecary-promise-returns"><a href="#no-unessecary-promise-returns" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No unessecary Promise returns</h3>\n<p>Previously declared functions <code>validateInput</code> and <code>comparePasswords</code> can now live inside the main block. I wouldn\'t write unit tests on them neither I would use them somewhere else in my codebase, so I don\'t have to put them in separate functions. Less functions, less code.</p>\n<h3 id="readable-code"><a href="#readable-code" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Readable code</h3>\n<p>Less code means easier to read and argue about.</p>\n<h3 id="no-bluebird-dependency"><a href="#no-bluebird-dependency" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No Bluebird dependency</h3>\n<p>Bluebird is now not needed since we can return native Promise objects. Previously, I was using <code>catch</code> with specific error type and <code>try</code> which are Bluebird specific.</p>\n<h2 id="conclussion"><a href="#conclussion" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclussion</h2>\n<p>We should always strive to refine and improve our codebases. Async/await can bring a lot of improvements and help us write more readable code, easier to argue about and to spot bugs. In case, you have to use still Promises, check out a <a href="http://2ality.com/2017/08/promise-callback-data-flow.html" target="_blank" rel="noreferrer noopener">wonderfull piece by Dr. Axel Rauschmayer</a> for more Promises and Async/Await patterns.</p>\n<p>Node.js 8 is now in LTS mode, so you have no reasons not to upgrade and miss the shiny new features of Javascript.</p>\n<p>Let me know what you think in the comments below and share this article with someone you know it would be helpfull to. 🤝</p>',
id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/async-await-a-thorough-example/index.md absPath of file >>> MarkdownRemark",timeToRead:6,frontmatter:{date:"2017-11-24T09:40:42.000Z",path:"/async-await-a-thorough-example/",tags:"Node.js, AsyncAwait",title:"Async/await - A thorough example",draft:null}},next:{excerpt:"On this post, I will go through the process of creating a landing page using Gatsby.js and BootstrapCSS framework. I use the same process for all my projects and products and I can certainly say that it works like a charm every time. Gatsby.js will…",html:'<p>On this post, I will go through the process of creating a landing page using Gatsby.js and BootstrapCSS framework. I use the same process for all my projects and products and I can certainly say that it works like a charm every time.</p>\n<p>Gatsby.js will allow us to describe our page\'s functionality and appearence with React.js and take full advantage of React\'s ecosystem. Using BootstrapCSS we will be able create fast prototypes for our various components we are going to need for our page. For start, we will use a ready made template found free over the Web.</p>\n<p>For a quick introduction to Gatsby and it\'s benefits, I wrote an article recently that you may be find interesting.</p>\n<p>This tutorial requires basic knowledge of the React.js framework and ofcourse HTML/CSS. Node.js and npm must be installed on your system.</p>\n<p>Let\'s start.</p>\n<h2 id="set-up-gatsbyjs"><a href="#set-up-gatsbyjs" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set up Gatsby.js</h2>\n<p><code>$> npm install -g gatsby</code></p>\n<p>Then create a new Gatsby.js project using the Gatsby CLI.</p>\n<p>We will fire the command:</p>\n<p><code>$> gatsby new gatsby-tutorial</code></p>\n<p>The above will create a folder structure that is ready to be build. The structure is:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>src\n|- layouts\n   |- index.css\n   |- index.js\n|- pages\n   |- 404.js\n   |- index.js\n   |- page-2.js\n.gitignore\npackage-lock.json\npackage.json\ngatsby-config.js</code></pre>\n      </div>\n<p>Let\'s have a look on these files and folders.</p>\n<p><code>.gitignore</code> comes preconfigured with all files and folders used by Gatsby and needs to be ignored. You can add more entries but do not remove those already in there.</p>\n<p><code>package.json</code> and <code>package-lock.json</code> are used by npm and have the dependencies needed to run and build the Gatsby project.</p>\n<p><code>gatsby-config.js</code> is a configuration file for Gatsby. We will add our plugins in there and also static information we need available on our site.</p>\n<p>The <code>layouts</code> will host different layouts for our site. For this tutorial, we will only need one layout, the default one. We will replace the <code>index.css</code> file with our SCSS file later on.</p>\n<p>The <code>pages</code> folder contains all our different pages. The <code>index.js</code> file is our homepage. The <code>404.js</code> is the one that will be shown when a route was not found and the <code>page-2.js</code> is just another page.</p>\n<p>Now that we have a better understanding of Gatsby\'s folder structure, we will add BootstapCSS. Open a terminal and type:</p>\n<p><code>$>npm i --save-dev bootstrap-scss</code></p>\n<p>We are installing the SCSS version of Bootstrap, in order to selectively import the modules we want, instead of just importing it all.</p>\n<p>Now by default, Gatsby won\'t understand an SCSS file. We need to add a <a href="https://www.gatsbyjs.org/packages/gatsby-plugin-sass/" target="_blank" rel="noreferrer noopener">plugin</a> that will compile our SCSS files.</p>\n<p>On your terminal again, type:</p>\n<p><code>$>npm i --save-dev gatsby-plugin-sass</code></p>\n<p>and then include the plugin in your <code>gatsby-config.js</code> file like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code>// in gatsby-config.js\nplugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n  `gatsby-plugin-sass`\n<span class="token punctuation">]</span>\n</code></pre>\n      </div>\n<p>Great! Now our Gatsby project is ready to be modified and add our own template. You may test it and see that everything went right:</p>\n<p>On your terminal:</p>\n<p><code>$>npm run develop</code></p>\n<p>This will start Gatsby on development mode and instruct you to open your browser on a specific host. Open it and you will the Gatsby\'s starter site.</p>\n<h2 id="add-your-own-template"><a href="#add-your-own-template" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add your own template</h2>\n<p>Now, for the scope of this tutorial, we will use a ready made template found on the internet. We will use <a href="http://blacktie.co/2015/03/sumo-landing-html-wordpress-landing-page/" target="_blank" rel="noreferrer noopener">this one</a> that I found and seems great for this tutorial. Download it and extract it. You will see that it\'s a huge HTML file and has Bootstrap and JQuery as a dependency and has a <code>style.css</code> file that contains the custom styles of the template.</p>\n<p>Now what we will do, is to copy everything inside <code>&#x3C;body></code> and paste it inside our <code>pages/index.js</code> component\'s <code>render</code> method. Then we will need to rename all <code>class</code> attributes to <code>className</code> (cause thats what React understands). Do not copy the <code>&#x3C;script></code> at the end.</p>\n<p>You will also notice that there are some <code>&#x3C;img></code> tags pointing to static assets. First copy those assets inside your <code>src</code> folder (make a subdirectory). Then we will require them first and then inject them inside our Markup. So, on top of the <code>index.js</code> file add a line for each of our images:</p>\n<p>So we will turn this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code><span class="token comment">&lt;!-- old index.html file --></span>\n...\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>assets/img/app-store.png<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n...\n</code></pre>\n      </div>\n<p>into this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-jsx"><code><span class="token comment">// src/index.js</span>\n<span class="token operator">...</span>\n<span class="token keyword">const</span> appStoreImg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>\'<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>assets<span class="token operator">/</span>images<span class="token operator">/</span>app<span class="token operator">-</span>store<span class="token punctuation">.</span>png<span class="token punctuation">)</span>\n<span class="token operator">...</span>\n\n<span class="token operator">...</span>\n<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>appStoreImg<span class="token punctuation">}</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>So with this we are comming to the understanding, that Gatsby will compile everything inside <code>src</code> folder so there will be no paths that we can use before compiling. By doing the above, we are instructing Gatsby to do whatever it needs to be done with the <code>app-store.png</code> image, then figure out it\'s path and inject it into our <code>&#x3C;img></code> tag.</p>\n<p>Now that we have our images in place, we need the custom style that comes with our template. We could just copy paste everything inside our <code>layouts/index.css</code> file, but remember that we indentionally decided to add SCSS support in order to selectively add our Bootstrap modules we want. So, we will rename and move our <code>layouts/index.css</code> into <code>scss/index.scss</code> that will contains:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>import "./bootstrap"\nimport "./custom"</code></pre>\n      </div>\n<p>The create two more files, <code>layouts/bootstrap.scss</code> and <code>layouts/custom.scss</code>. <code>layouts/bootstrap.scss</code> will contain all our imports for Bootstrap, like that:</p>\n<div class="gatsby-highlight">\n      <pre class="language-scss"><code>@charset <span class="token string">"UTF-8"</span><span class="token punctuation">;</span>\n<span class="token property"><span class="token variable">$bootstrap-sass-asset-helper</span></span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/variables"</span><span class="token punctuation">;</span>\n\n<span class="token property"><span class="token variable">$font-size-base</span></span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/mixins"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/normalize"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/print"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/glyphicons"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/scaffolding"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/type"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/code"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/forms"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/navbar"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/navs"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/component-animations"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/utilities"</span><span class="token punctuation">;</span>\n<span class="token keyword">@import</span> <span class="token string">"~bootstrap-sass/assets/stylesheets/bootstrap/responsive-utilities"</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Notice how we selectively add the Bootstrap modules we want and how we override Bootstrap\'s variables. This way our final bundle will be less in size and we can also configure Bootstrap without overriding it\'s values and thus adding more code.</p>\n<p>Now in our <code>scss/custom.scss</code> we will paste the styles from the template (remeber to fix any url paths errors). CSS is valid SCSS so it should be functioning as before and we can extend it by adding SCSS mixins and variables. That\'s up to us.</p>\n<h2 id="multiple-pages"><a href="#multiple-pages" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple pages</h2>\n<p>Besides everything else, Gatsby does it great when it comes to multiple pages of our site. To demonstrate this behavior, we will break our landing page into two pages and extract the pricing section to another page.</p>\n<p>You will find the different sections of the landing page at <code>src/pages/index.js</code>. We will create another file, <code>src/page/pricing.js</code> and extract the pricing and the testimonials section right there.</p>\n<p>Navigate over at <code>localhost:8000/pricing</code> and you will notice that we are missing our header and footer. But we don\'t have to keep them on every page so we will extract them from the index page and move them to our <code>layouts/index.js</code> file.</p>\n<p>I don\'t want the form to be on every page too, so I am going to do some modifications that you will find over at the repository of this project.</p>\n<p>Notice also the use of <code>Link</code> component. Gatsby uses this component to track your pages and the transitions, in order to be able to smooth client side navigation.</p>\n<h2 id="contact-form"><a href="#contact-form" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contact form</h2>\n<p>Now that our page has some visual form and we are happy with the result, we can start adding some functionalities. To start with, we will make the subscription form on the header functional!</p>\n<p>Since our index page is just a React component, we can just start adding functionality as we know. Let\'s add an event to fire once the Subscribe button is clicked and send the email to our server.</p>\n<div class="gatsby-highlight">\n      <pre class="language-jsx"><code><span class="token operator">...</span>\n<span class="token keyword">class</span> <span class="token class-name">IndexPage</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      email<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">handleEmailChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">/**\n     * Validate User\'s input first\n     */</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      email<span class="token punctuation">:</span> value\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">handleSubscribeClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">/**\n     * Email is in the state,\n     * send it directly to your server\n     */</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n        <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>and the form inside <code>render</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-html"><code>...\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>register.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>plain<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  &lt;input\n    type="email"\n    name="email"\n    className="subscribe-input"\n    placeholder="Enter your e-mail address..."\n    required\n    onChange={({target}) => this.handleEmailChange(target)}\n  />\n  &lt;button\n    className=\'btn btn-conf btn-green\'\n    type="submit"\n    onClick={() => this.handleSubscribeClick()}>\n    Start your free trial\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>\n...\n</code></pre>\n      </div>\n<h2 id="the-end"><a href="#the-end" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The end</h2>\n<p>Gatsby is an amazing static site generator that hides a lot of gems. You may find it\'s API complicated, but after</p>',id:"/home/travis/build/kbariotis/kostasbariotis.com/blog/gatsby-landing-page/index.md absPath of file >>> MarkdownRemark",timeToRead:7,frontmatter:{date:"2017-10-30T18:16:00.000Z",path:"/gatsby-landing-page/",tags:"Javascript, gatsby.js, react.js, SSR",title:"Create an SEO friendly and performant landing page with Gatsby.js",draft:!0}}}}}});
//# sourceMappingURL=path---serverless-demystified-2b36daad8cf6b739a1a3.js.map